<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <title>Event Loop. Архитектура браузера и Node.js. Движки и рендер</title>
  </head>
  <body>
    <h1>Event Loop. Архитектура браузера и Node.js. Движки и рендер</h1>
    <p>
      Источник:
      <a href="https://www.youtube.com/watch?v=zDlg64fsQow">
        Event Loop от А до Я. От UlbiTV
      </a>
    </p>
    <h2>
      План урока:
      <ul>
        <li>Что такое Event Loop</li>
        <li>Однопоточность/многопоточность.</li>
        <li>Движки JavaScript (stack, память, heap)</li>
        <li>
          Браузерный Event Loop (stack, micro/macro tasks, web api, RAF,
          mutation observer, queueMicrotasks, стадии рендера, переполнение
          стека)
        </li>
        <li>
          Event Loop в Node.js (очереди, шаблон реактор, демультиплексор
          событий, планировщик потоков)
        </li>
      </ul>
    </h2>

    <h3>Архитектура браузера</h3>
    <p>
      Состоит из пользовательского интерфейса (окно браузера), двжка браузера и
      движка рендеринга (проходит стадии рендера и видим страницу браузера).
      Также есть модули для работы с сетью, интерпретатор JS (движок JS,
      например V8) и UI Backend (отрисовка графики, текста и т.д.). Поверх V8
      работает движок Node.js и браузерный движок (например, Chrome - это V8 +
      Blink). Также есть хранилище для обработки данных (cookies, localStorage и
      т.д.). Пример архитектуры браузера на картинке ниже.
    </p>
    <picture>
      <img
        class="mx-auto my-8 rounded-lg shadow-lg border border-gray-200 w-1/3"
        src="./img/browser_architecture.jpg"
        alt="Шаблонная архитектура браузера"
      />
      <figcaption class="text-center"></figcaption>
        Шаблонная архитектура браузера
      </figcaption>
    </picture>
    <p>
      Большинство браузеров просты и используют опенсорсные технологии. Их требуется просто объединить. 
      Ниже пример архитектуры браузера Chrome.
    </p>
    <picture>
      <img
        src="./img/chrome_architecture.png"
        alt="Архитектура Chrome"
        class="mx-auto my-8 rounded-lg shadow-lg border border-gray-200 w-1/3"
      />
      <figcaption class="text-center">Архитектура Chrome</figcaption>
    </picture>
    <p>
      Архитектура движка рендера (webkit). На вход приходит HTML, CSS и JS.
      HTML парсится в DOM, CSS в CSSOM. По итогу строится дерево рендера, которое
      используется для отрисовки страницы.
    </p>
    <picture>
      <img
        src="./img/render_webkit.png"
        alt="Архитектура Webkit"
        class="mx-auto my-8 rounded-lg shadow-lg border border-gray-200 w-1/3"
      />
      <figcaption class="text-center">Архитектура Webkit</figcaption>
    </picture>
    <p>
      Архитектура одна, но движки разные. Например, в Chrome используется
      движок Blink, а в Firefox - Gecko.
      В этом основная разница между браузерами. Их большое количество
      движков, но архитектура одинаковая.
    </p>
    <p>
      Далее. Event Loop. 
    </p>
    <!-- To be continued... -->
  </body>
</html>
